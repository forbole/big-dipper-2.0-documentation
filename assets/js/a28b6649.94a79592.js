"use strict";(self.webpackChunkbig_dipper_2_0_docs=self.webpackChunkbig_dipper_2_0_docs||[]).push([[524],{3905:(e,t,n)=>{n.d(t,{Zo:()=>c,kt:()=>h});var a=n(7294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var p=a.createContext({}),l=function(e){var t=a.useContext(p),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},c=function(e){var t=l(e.components);return a.createElement(p.Provider,{value:t},e.children)},d="mdxType",u={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},m=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,o=e.originalType,p=e.parentName,c=s(e,["components","mdxType","originalType","parentName"]),d=l(n),m=r,h=d["".concat(p,".").concat(m)]||d[m]||u[m]||o;return n?a.createElement(h,i(i({ref:t},c),{},{components:n})):a.createElement(h,i({ref:t},c))}));function h(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var o=n.length,i=new Array(o);i[0]=m;var s={};for(var p in t)hasOwnProperty.call(t,p)&&(s[p]=t[p]);s.originalType=e,s[d]="string"==typeof e?e:r,i[1]=s;for(var l=2;l<o;l++)i[l]=n[l];return a.createElement.apply(null,i)}return a.createElement.apply(null,n)}m.displayName="MDXCreateElement"},8366:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>p,contentTitle:()=>i,default:()=>u,frontMatter:()=>o,metadata:()=>s,toc:()=>l});var a=n(7462),r=(n(7294),n(3905));const o={title:"base-v1.10.0 to base-v2.0.0",sidebar_position:1},i=void 0,s={unversionedId:"cosmos-based/frontend/migrations/v1.10.0-to-v2.0.0",id:"cosmos-based/frontend/migrations/v1.10.0-to-v2.0.0",title:"base-v1.10.0 to base-v2.0.0",description:"This major release is only compatible with bdjuno v2.0.0+",source:"@site/docs/cosmos-based/frontend/migrations/v1.10.0-to-v2.0.0.md",sourceDirName:"cosmos-based/frontend/migrations",slug:"/cosmos-based/frontend/migrations/v1.10.0-to-v2.0.0",permalink:"/cosmos-based/frontend/migrations/v1.10.0-to-v2.0.0",draft:!1,tags:[],version:"current",lastUpdatedAt:1681203982,formattedLastUpdatedAt:"Apr 11, 2023",sidebarPosition:1,frontMatter:{title:"base-v1.10.0 to base-v2.0.0",sidebar_position:1},sidebar:"mySidebar",previous:{title:"General Config Reference",permalink:"/cosmos-based/frontend/general-config"},next:{title:"base-v1.9.0 to base-v1.10.0",permalink:"/cosmos-based/frontend/migrations/v1.9.0-to-v1.10.0"}},p={},l=[{value:"Changes",id:"changes",level:2},{value:"Update BDJuno to v2.0.0",id:"update-bdjuno-to-v200",level:2},{value:"Update your chain&#39;s base branch",id:"update-your-chains-base-branch",level:2},{value:"Test the upgrade worked",id:"test-the-upgrade-worked",level:2}],c={toc:l},d="wrapper";function u(e){let{components:t,...n}=e;return(0,r.kt)(d,(0,a.Z)({},c,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("admonition",{type:"warning"},(0,r.kt)("p",{parentName:"admonition"},(0,r.kt)("strong",{parentName:"p"},"This major release is only compatible with ",(0,r.kt)("a",{parentName:"strong",href:"https://github.com/forbole/bdjuno"},"bdjuno")," ",(0,r.kt)("inlineCode",{parentName:"strong"},"v2.0.0+")))),(0,r.kt)("h2",{id:"changes"},"Changes"),(0,r.kt)("p",null,"As a network continues to grow we have noticed major lags in bdjuno and the database growing unncessarily big. Since the release of bdjuno ",(0,r.kt)("inlineCode",{parentName:"p"},"v2.0.0"),", they have introduced hasura actions in which they offloaded certain data to the node directly as opposed to keeping it in psql. Doing this has broken some unique UI we may have but it has strongly improved bdjuno's indexing performance."),(0,r.kt)("p",null,"As of ",(0,r.kt)("inlineCode",{parentName:"p"},"base-v2.0.0"),", we have updated our graphql to use the necessary hasura actions."),(0,r.kt)("p",null,"Other changes include:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Add better handling of get denom return types (",(0,r.kt)("a",{parentName:"li",href:"https://github.com/forbole/big-dipper-2.0-cosmos/issues/735"},"#","735"),")"),(0,r.kt)("li",{parentName:"ul"},"Updated market cap display (",(0,r.kt)("a",{parentName:"li",href:"https://github.com/forbole/big-dipper-2.0-cosmos/issues/698"},"#","698"),")"),(0,r.kt)("li",{parentName:"ul"},"Optimised validator details and account details to prevent random polling behavior (",(0,r.kt)("a",{parentName:"li",href:"https://github.com/forbole/big-dipper-2.0-cosmos/issues/703"},"#","703"),")"),(0,r.kt)("li",{parentName:"ul"},"Add hasura actions error handling in account details (",(0,r.kt)("a",{parentName:"li",href:"https://github.com/forbole/big-dipper-2.0-cosmos/issues/713"},"#","713"),")"),(0,r.kt)("li",{parentName:"ul"},"Display accounts even if balance is 0 and does not exist (",(0,r.kt)("a",{parentName:"li",href:"https://github.com/forbole/big-dipper-2.0-cosmos/issues/692"},"#","692"),")"),(0,r.kt)("li",{parentName:"ul"},"Update handling of 18 decimal places denoms (",(0,r.kt)("a",{parentName:"li",href:"https://github.com/forbole/big-dipper-2.0-cosmos/issues/724"},"#","724"),")"),(0,r.kt)("li",{parentName:"ul"},"Changed ",(0,r.kt)("inlineCode",{parentName:"li"},"NEXT_PUBLIC_WS_CHAIN_URL")," to ",(0,r.kt)("inlineCode",{parentName:"li"},"NEXT_PUBLIC_RPC_WEBSOCKET")," for clarification with backwards compatibility"),(0,r.kt)("li",{parentName:"ul"},"Changed ",(0,r.kt)("inlineCode",{parentName:"li"},"NEXT_PUBLIC_CHAIN_STATUS")," to ",(0,r.kt)("inlineCode",{parentName:"li"},"NEXT_PUBLIC_CHAIN_TYPE")," for clarification with backwards compatibility"),(0,r.kt)("li",{parentName:"ul"},"Fixed Apr error if bonded tokens is 0 (",(0,r.kt)("a",{parentName:"li",href:"https://github.com/forbole/big-dipper-2.0-cosmos/issues/758"},"#","758"),")")),(0,r.kt)("p",null,"You may read the release changelog ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/forbole/big-dipper-2.0-cosmos/releases/tag/base-v2.0.0"},"here")),(0,r.kt)("h2",{id:"update-bdjuno-to-v200"},"Update BDJuno to v2.0.0"),(0,r.kt)("p",null,"Follow the ",(0,r.kt)("a",{parentName:"p",href:"https://docs.bigdipper.live/cosmos-based/parser/migrations/v2.0.0#start-hasura-actions"},"docs")," and setup hasura action and update the hasura metadata"),(0,r.kt)("h2",{id:"update-your-chains-base-branch"},"Update your chain's base branch"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"$ git fetch --tags\n$ git checkout <your chain base>\n$ git checkout -b merge/v2.0.0\n$ git merge base-v2.0.0\n")),(0,r.kt)("admonition",{type:"info"},(0,r.kt)("p",{parentName:"admonition"},"If ",(0,r.kt)("inlineCode",{parentName:"p"},"src/graphql/types.tsx")," has merge conflicts, delete the file and edit ",(0,r.kt)("inlineCode",{parentName:"p"},"codegen.yml")," to your graphql url and run ",(0,r.kt)("inlineCode",{parentName:"p"},"npm run graphql:codegen"),", this will correctly regenerate the types file based on your hasura, and throw error if the hasura was not setup correctly."),(0,r.kt)("pre",{parentName:"admonition"},(0,r.kt)("code",{parentName:"pre",className:"language-yaml",metastring:"{11}","{11}":!0},'overwrite: true\nconfig:\n  # omitOperationSuffix: true\n  skipTypeNameForRoot: true\ngenerates:\n  ./src/graphql/types.tsx:\n    documents:\n      - \'./src/**/*.graphql\'\n      - \'./src/**/*_actions.ts\'\n      - \'!./src/**/desmos_profile.graphql\'\n    schema: <your graphql url>\n    plugins:\n      - "typescript"\n      - "typescript-operations"\n      - "typescript-react-apollo" # To generate custom hooks per query\n  ./src/graphql/desmos_profile.ts:\n    schema: https://gql.mainnet.desmos.network/v1/graphql\n    documents:\n      - \'src/graphql/desmos_profile_graphql.ts\'\n    plugins:\n      - "typescript"\n      - "typescript-operations"\n\n'))),(0,r.kt)("h2",{id:"test-the-upgrade-worked"},"Test the upgrade worked"),(0,r.kt)("p",null,"You can test the new changes by going to any validator or account details page. The balance and staking information should now be returned directly from the node, showing live data as oppose to the previous delay."))}u.isMDXComponent=!0}}]);